{"version":3,"sources":["../../source/class/widgetbrowser/pages/List.js"],"names":["qx","Bootstrap","executePendingDefers","$$dbClassInfo","Class","define","extend","widgetbrowser","pages","AbstractPage","construct","constructor","call","this","__grid","ui","container","Composite","layout","Grid","__listUrl","util","ResourceManager","getInstance","toUri","add","initWidgets","members","widgets","_widgets","label","basic","Label","row","column","list","__getList","push","virtualList","__getVirtualList","groupedVirtualList","__getGroupedVirtualList","form","List","setWidth","req","io","request","Xhr","setParser","addListener","getResponse","people","forEach","person","item","ListItem","String","lastname","firstname","setHeight","send","set","height","width","labelPath","labelOptions","converter","data","model","getLastname","__attachStore","setDelegate","sorter","a","b","group","charAt","toUpperCase","widget","store","Json","bind"],"mappings":"qYAACA,GAAEC,UAAUC,qBAAqBC,GAgCjCH,GAAEI,MAAMC,OAAO,4BAEZC,OAAQC,cAAcC,MAAMC,aAE5BC,UAAW,WACTH,cAAAC,MAAAC,aAAAE,YAAAC,KAAAC,MAEAA,KAAKC,OAAS,IAAId,GAAGe,GAAGC,UAAUC,UAAU,IAAIjB,GAAGe,GAAGG,OAAOC,KAAK,KAClEN,KAAKO,UAAYpB,GAAGqB,KAAKC,gBAAgBC,cAAcC,MAAM,6BAC7DX,KAAKY,IAAIZ,KAAKC,QAEdD,KAAKa,eAGPC,SAGAb,OAAS,KACTM,UAAY,KAEZM,YAAa,WACX,IAAIE,EAAUf,KAAKgB,SAEfC,EAAQ,IAAI9B,GAAGe,GAAGgB,MAAMC,MAAM,QAClCnB,KAAKC,OAAOW,IAAIK,GAAQG,IAAK,EAC3BC,OAAQ,IACV,IAAIC,EAAOtB,KAAKuB,YAChBvB,KAAKC,OAAOW,IAAIU,GAAOF,IAAK,EAC1BC,OAAQ,IACVN,EAAQS,KAAKF,GAEbL,EAAQ,IAAI9B,GAAGe,GAAGgB,MAAMC,MAAM,kBAC9BnB,KAAKC,OAAOW,IAAIK,GAAQG,IAAK,EAC3BC,OAAQ,IACV,IAAII,EAAczB,KAAK0B,mBACvB1B,KAAKC,OAAOW,IAAIa,GAAcL,IAAK,EACjCC,OAAQ,IACVN,EAAQS,KAAKC,GAEbR,EAAQ,IAAI9B,GAAGe,GAAGgB,MAAMC,MAAM,2BAC9BnB,KAAKC,OAAOW,IAAIK,GAAQG,IAAK,EAC3BC,OAAQ,IACV,IAAIM,EAAqB3B,KAAK4B,0BAC9B5B,KAAKC,OAAOW,IAAIe,GAAqBP,IAAK,EACxCC,OAAQ,IACVN,EAAQS,KAAKG,IAGfJ,UAAW,WACT,IAAID,EAAO,IAAInC,GAAGe,GAAG2B,KAAKC,KAC1BR,EAAKS,SAAS,KAEd,IAAIC,EAAM,IAAI7C,GAAG8C,GAAGC,QAAQC,IAAInC,KAAKO,WAYrC,OAXAyB,EAAII,UAAU,QACdJ,EAAIK,YAAY,UAAW,WACZL,EAAIM,cAAcC,OACxBC,QAAQ,SAASC,GACtB,IAAIC,EAAO,IAAIvD,GAAGe,GAAG2B,KAAKc,SAASC,OAAOH,EAAOI,UAAY,KAAOJ,EAAOK,WAC3EJ,EAAKK,UAAU,IACfzB,EAAKV,IAAI8B,OAGbV,EAAIgB,OAEG1B,GAGTI,iBAAkB,WAChB,IAAIJ,GAAO,IAAInC,GAAGe,GAAGoB,KAAKQ,MAAOmB,KAC/BC,OAAQ,IACRC,MAAO,IACPC,UAAW,YACXC,cACEC,UAAW,SAASC,EAAMC,GACxB,OAAOA,EAAQA,EAAMC,cAAgB,KAAOF,EAAO,kBAOzD,OAFAvD,KAAK0D,cAAcpC,GAEZA,GAGTM,wBAAyB,WACvB,IAAIN,EAAOtB,KAAK0B,mBAqBhB,OAFAJ,EAAKqC,aAbHC,OAAS,SAASC,EAAGC,GAInB,OAHAD,EAAIA,EAAEJ,gBACNK,EAAIA,EAAEL,eAES,EAAII,EAAIC,GAAK,EAAI,GAIlCC,MAAQ,SAASP,GACf,OAAOA,EAAMC,cAAcO,OAAO,GAC/BC,iBAKA3C,GAGToC,cAAe,SAASQ,GACV,IAAI/E,GAAGoE,KAAKY,MAAMC,KAAKpE,KAAKO,WAClC8D,KAAK,eAAgBH,EAAQ,aA/IxCxE,cAAaC,MAAMmC,KAAKxC,cAAgBA","sourcesContent":["/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2010 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n\n/**\n * Demonstrates qx.ui.list(...):\n *\n * List\n *\n *\n * @asset(widgetbrowser/people.json)\n */\n\nqx.Class.define(\"widgetbrowser.pages.List\",\n  {\n    extend: widgetbrowser.pages.AbstractPage,\n\n    construct: function() {\n      this.base(arguments);\n\n      this.__grid = new qx.ui.container.Composite(new qx.ui.layout.Grid(10));\n      this.__listUrl = qx.util.ResourceManager.getInstance().toUri(\"widgetbrowser/people.json\");\n      this.add(this.__grid);\n\n      this.initWidgets();\n    },\n\n    members :\n  {\n\n    __grid : null,\n    __listUrl : null,\n\n    initWidgets: function() {\n      var widgets = this._widgets;\n\n      var label = new qx.ui.basic.Label(\"List\");\n      this.__grid.add(label, {row: 0,\n        column: 0});\n      var list = this.__getList();\n      this.__grid.add(list, {row: 1,\n        column: 0});\n      widgets.push(list);\n\n      label = new qx.ui.basic.Label(\"List (virtual)\");\n      this.__grid.add(label, {row: 0,\n        column: 1});\n      var virtualList = this.__getVirtualList();\n      this.__grid.add(virtualList, {row: 1,\n        column: 1});\n      widgets.push(virtualList);\n\n      label = new qx.ui.basic.Label(\"List (virtual, grouped)\");\n      this.__grid.add(label, {row: 0,\n        column: 2});\n      var groupedVirtualList = this.__getGroupedVirtualList();\n      this.__grid.add(groupedVirtualList, {row: 1,\n        column: 2});\n      widgets.push(groupedVirtualList);\n    },\n\n    __getList: function() {\n      var list = new qx.ui.form.List();\n      list.setWidth(150);\n\n      var req = new qx.io.request.Xhr(this.__listUrl);\n      req.setParser(\"json\");\n      req.addListener(\"success\", function() {\n        var people = req.getResponse().people;\n        people.forEach(function(person) {\n          var item = new qx.ui.form.ListItem(String(person.lastname) + \", \" + person.firstname);\n          item.setHeight(25);\n          list.add(item);\n        });\n      });\n      req.send();\n\n      return list;\n    },\n\n    __getVirtualList: function() {\n      var list = new qx.ui.list.List().set({\n        height: 280,\n        width: 150,\n        labelPath: \"firstname\",\n        labelOptions: {\n          converter: function(data, model) {\n            return model ? model.getLastname() + \", \" + data : \"no model...\";\n          }\n        }\n      });\n\n      this.__attachStore(list);\n\n      return list;\n    },\n\n    __getGroupedVirtualList: function() {\n      var list = this.__getVirtualList();\n\n      // Creates the delegate for sorting and grouping\n      var delegate = {\n\n        // Sorts the model data by last name\n        sorter : function(a, b) {\n          a = a.getLastname();\n          b = b.getLastname();\n\n          return a > b ? 1 : a < b ? -1 : 0;\n        },\n\n        // Assign the group name for each item (fist char form last name)\n        group : function(model) {\n          return model.getLastname().charAt(0)\n            .toUpperCase();\n        }\n      };\n      list.setDelegate(delegate);\n\n      return list;\n    },\n\n    __attachStore: function(widget) {\n      var store = new qx.data.store.Json(this.__listUrl);\n      store.bind(\"model.people\", widget, \"model\");\n    }\n  }\n  });\n"]}